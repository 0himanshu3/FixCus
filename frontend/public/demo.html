<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>AdvancedMarker multiple markers example</title>
  <style>#map { width: 100vw; height: 100vh; }</style>
</head>
<body>
  <div id="map"></div>
  <script>
    (async function(){
      const KEY = "AIzaSyBw8BRyggERfdynVpYhcYpz6Q4No1Wfr8Q";
      const script = document.createElement('script');
      script.src = `https://maps.googleapis.com/maps/api/js?key=${KEY}&v=weekly`;
      script.async = true; script.defer = true;
      document.head.appendChild(script);
      await new Promise((resolve, reject) => { script.onload = resolve; script.onerror = reject; });

      const { Map } = await google.maps.importLibrary("maps");
      const { AdvancedMarkerElement } = await google.maps.importLibrary("marker");

      const center = { lat: 28.9843847907343, lng: 77.70621702075009 };
      const map = new Map(document.getElementById('map'), {
        center, zoom: 15, mapId: 'DEMO_MAP_ID'
      });

      // Nearby locations array
      const nearbyLocations = [
        { lat: 28.986, lng: 77.707, title: "Location 1" },
        { lat: 28.983, lng: 77.705, title: "Location 2" },
        { lat: 28.985, lng: 77.703, title: "Location 3" },
        { lat: 28.982, lng: 77.709, title: "Location 4" }
      ];

      function createMarkerContainer(color) {
        const container = document.createElement('div');
        container.style.width = '28px';
        container.style.height = '40px';
        container.style.background = color;
        container.style.border = '2px solid white';
        container.style.borderRadius = '50% 50% 50% 0';
        container.style.transform = 'rotate(-45deg)';
        return container;
      }

      // Marker for center
      new AdvancedMarkerElement({
        map,
        position: center,
        content: createMarkerContainer('red'),
        title: "Center Location"
      });

      // Markers for nearby locations
      nearbyLocations.forEach(loc => {
        new AdvancedMarkerElement({
          map,
          position: { lat: loc.lat, lng: loc.lng },
          content: createMarkerContainer('red'),
          title: loc.title
        });
      });
    })();
  </script>
</body>
</html>
